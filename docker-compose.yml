version: '3.7'
services:
  farmer:
    image: subspace-farmer
    networks:
      - sp_network
    ports:
      - "30533:30533"
    privileged: true
    volumes:
      - ${PLOT_PATH:-./data}:/app/plot
    environment:
      - REWARD_ADDRESS=${REWARD_ADDRESS:?please make sure to set your REWARD_ADDRESS environment variable in the .env file}
      - NODE_RPC_URL=${NODE_RPC_URL}
      - PLOT_SIZE=${PLOT_SIZE:?please make sure to set your PLOT_SIZE environment variable in the .env file}
      - IS_ARM=${IS_ARM:-no}
      - IS_SKYLAKE=${IS_SKYLAKE:-true}
    command:
      # 这里可以添加其他参数，添加其他path,注意添加path要在volumes映射
      # - "path=/subspace2,size=100G"
      # - "--cache-percentage"
      # - "2"
      # - "--listen-on"
      # - "/ip4/0.0.0.0/tcp/30533"
    restart: unless-stopped

networks:
  sp_network:
